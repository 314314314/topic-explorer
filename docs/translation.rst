Translation Guide
===================

The Topic Explorer aims to be accessible in different languages. This guide
serves as an introduction to *internationalization* (or `i18n` for short, as the
word "internationalization" has 18 letters following the "i"). After using this
guide, you should be able to add a translation in a new language.

Concepts
----------

The process of making a translation can be seen as generating three different files:

1.  **.pot** -- A ``.pot`` file defines a template that contains all of the English-language strings that need to be translated into the new language. The InPhO-TE template is in `topic-explorer/locale/topicexplorer.pot` and is  generated by ``make_translation.sh``.
2.  **.po** -- A ``.po`` file defines a specific translation of the strings. This file is created from the `.pot` file and is edited by the translator using **`poedit <https://poedit.net/>`_**.
3.  **.mo** -- A `.mo` file defines the machine-representation of the translation. This file is automatically generated by poedit.

Topic Explorer uses the `GNU gettext <https://www.gnu.org/software/gettext/>`_ i18n conventions, as implemented by the `Python gettext library <https://docs.python.org/2/library/gettext.html>`_. 

Getting Started
-----------------

To make a new translation:

1.  `Perform a "developer install" of InPhO-TE <https://github.com/inpho/topic-explorer#developer-install>`_.
2.  Install `poedit <https://poedit.net/>`_.
3.  Open poedit and click "Create new translation".
4.  Navigate to your developer install and select the ``locale/topicexplorer.pot`` file.
5.  Type in the language you wish to use.
6.  Use the poedit interface to add translations for each string.
7.  Look up the `ISO 639-1 code <https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes>`_ for your language. 
     -  For example, English is ``en``, Chinese is ``zh``, German is ``de``, and Russian is ``ru``.
8.  Save your file to the InPhO-TE locale directory: ``locale/__ISO_CODE_HERE__/LC_MESSAGES/topicexplorer.po`. You may have to create these directories.  poedit will automatically create the corresponding ``topicexplorer.mo`` file.
     -  For example, a new Russian translation would be placed in ``locale/ru/LC_MESSAGES/topicexplorer.po``.
9.  Test your translation by using the ``topicexplorer`` command.
     -  If your translation does not match your operating system default, you may have to run using ``LANGUAGE=ISO_CODE_HERE topicexplorer``. This will override the operating system default.

Contact the developers for further help on merging your translation to the codebase.

Further Reading
-----------------
- `Translate your Python 3 program with the gettext module <http://inventwithpython.com/blog/2014/12/20/translate-your-python-3-program-with-the-gettext-module/>`_
- `Books on Internationalization (i18n) <http://www.i18nguy.com/books.html>`_
